This is feature 2 from rebase-branch.
