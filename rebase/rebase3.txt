This is feature 3 from rebase-branch.
